<%= form_with model: @job do |form| %>
  <div class="row mt-3 p-3">
    <div class="col-12 col-md-12 col-xl-12 mt-md-0 mt-4">
      <div class="card h-100">
        <div class="card-header p-2">
          <div class="row">
            <div class="col-md-8 d-flex align-items-center">
              <h5 class="mb-0"><%= @job.title %></h5>
            </div>
            <div class="col-md-4 text-end mt-1">
              <%= link_to 'Back', activejob_web_job_path(@job), class: 'btn btn-sm btn-outline-secondary' %>
              <%= form.submit 'Submit', class: 'btn btn-sm btn-outline-success' %>
            </div>
          </div>
        </div>

        <div class="card-body p-3">
          <% if @job.errors.any? %>
            <div class="alert alert-danger" role="alert">
              <ul>
                <% @job.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <div class="mb-3 row">
            <div class="col-sm-2"><strong class="text-dark">Assigned Approvers:</strong></div>
            <div class="col-sm-5">
              <ul class="list-group">
                <% if @approvers.present?%>
                  <% @approvers.map do |approver| %>
                    <li class="list-group-item"><%= approver %></li>
                  <% end %>
                <% else %>
                  <%= 'No approvers assigned' %>
                <% end %>
              </ul>
            </div>
          </div>

          <div class="mb-3 row">
            <div class="col-sm-2"><strong class="text-dark">Assigned Executors:</strong></div>
            <div class="col-sm-5">
              <ul class="list-group">
                <% if @executors.present?%>
                  <% @executors.map do |executor| %>
                    <li class="list-group-item"><%= executor %></li>
                  <% end %>
                <% else %>
                  <%= 'No executors assigned' %>
                <% end %>
              </ul>
            </div>
          </div>

          <div class="mb-3 row">
            <div class="col-sm-2"><strong class="text-dark">Approvers:</strong></div>
            <div class="col-sm-5">
              <%= form.collection_select(:approver_ids, @all_approvers, :id, :email, {}, { multiple: true, class: 'form-select', size: '10' }) %>
            </div>
          </div>

          <div class="mb-3 row">
            <div class="col-sm-2"><strong class="text-dark">Executors:</strong></div>
            <div class="col-sm-5">
              <%= form.collection_select(:executor_ids, @all_executors, :id, :email, {}, { multiple: true, class: 'form-select', size: '10' }) %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>